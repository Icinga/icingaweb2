<script type="text/javascript">

function notify(e) {
    alert("New Message: " + e.data);
}

var source = new EventSource("<?= $this->baseUrl("sse.php") ?>");

<?php
foreach($this->auth->getUser()->getRoles() as $role)
{
    echo "source.addEventListener('".$role->key()."', notify, false);";
}
?>
</script>
