<div class="controls">
  <?= $tabs; ?>
  <h1><?= $this->translate('Monitoring Backends') ?></h1>
</div>

<div class="content" data-base-target="_next">
  <p>
    <a href="<?= $this->href('/monitoring/config/createbackend'); ?>">
      <?= $this->icon('plus'); ?> <?= $this->translate('Create New Monitoring Backend'); ?>
    </a>
  </p>
  <table class="action alternating">
    <thead>
      <th><?= $this->translate('Monitoring Backend'); ?></th>
      <th style="width: 5em"><?= $this->translate('Remove'); ?></th>
    </thead>
    <tbody>
    <?php foreach ($this->backendsConfig as $backendName => $config): ?>
      <tr>
        <td>
          <?= $this->qlink(
            $backendName,
            '/monitoring/config/editbackend',
            array('backend' => $backendName),
            array(
                'icon'  => 'edit',
                'title' => sprintf($this->translate('Edit monitoring backend %s'), $backendName)
            )
          ); ?>
          <small>(<?= sprintf(
            $this->translate('Type: %s'),
            $this->escape($config->type === 'ido' ? 'IDO' : ucfirst($config->type))
          ); ?>)</small>
        </td>
        <td>
          <?= $this->qlink(
            '',
            '/monitoring/config/removebackend',
            array('backend' => $backendName),
            array(
                'icon'  => 'trash',
                'title' => sprintf($this->translate('Remove monitoring backend %s'), $backendName)
            )
          ); ?>
        </td>
      </tr>
    <?php endforeach; ?>
    </tbody>
  </table>
  <h1><?= $this->translate('Command Transports') ?></h1>
  <p>
    <a href="<?= $this->href('/monitoring/config/createtransport'); ?>">
      <?= $this->icon('plus'); ?> <?= $this->translate('Create New Transport'); ?>
    </a>
  </p>
  <table class="action alternating">
    <thead>
      <th><?= $this->translate('Transport'); ?></th>
      <th style="width: 5em"><?= $this->translate('Remove'); ?></th>
    </thead>
    <tbody>
    <?php foreach ($this->transportConfig as $transportName => $config): ?>
      <tr>
        <td>
          <?= $this->qlink(
            $transportName,
            '/monitoring/config/edittransport',
            array('transport' => $transportName),
            array(
                'icon'  => 'edit',
                'title' => sprintf($this->translate('Edit command transport %s'), $transportName)
            )
          ); ?>
          <small>(<?= sprintf(
            $this->translate('Type: %s'),
            $config->host !== null ? $this->translate('Remote') : $this->translate('Local')
          ); ?>)</small>
        </td>
        <td>
          <?= $this->qlink(
            '',
            '/monitoring/config/removetransport',
            array('transport' => $transportName),
            array(
                'icon'  => 'trash',
                'title' => sprintf($this->translate('Remove command transport %s'), $transportName)
            )
          ); ?>
        </td>
      </tr>
    <?php endforeach; ?>
    </tbody>
  </table>
</div>
